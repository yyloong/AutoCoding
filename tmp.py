# 将字符串保存为 tmp.patch 文件

content = """diff --git a/django/contrib/messages/apps.py b/django/contrib/messages/apps.py\nindex 5bda152..441c95c 100644\n--- a/django/contrib/messages/apps.py\n+++ b/django/contrib/messages/apps.py\n@@ -8,12 +8,18 @@ from django.utils.translation import gettext_lazy as _\n \n def update_level_tags(setting, **kwargs):\n     if setting == \"MESSAGE_TAGS\":\n+        # Force re-evaluation of the lazy object by clearing its internal state\n+        if hasattr(base, 'LEVEL_TAGS') and hasattr(base.LEVEL_TAGS, '_setup'):\n+            # Clear the cached value so it will be re-evaluated\n+            if hasattr(base.LEVEL_TAGS, '_wrapped'):\n+                base.LEVEL_TAGS._wrapped = None\n+        # Recreate the lazy object to ensure fresh evaluation\n         base.LEVEL_TAGS = SimpleLazyObject(get_level_tags)\n \n \n class MessagesConfig(AppConfig):\n-    name = \"django.contrib.messages\"\n-    verbose_name = _(\"Messages\")\n+    name = 'django.contrib.messages'\n+    verbose_name = _('Messages')\n \n     def ready(self):\n         setting_changed.connect(update_level_tags)\n"""

with open("tmp.patch", "w", encoding="utf-8") as file:
    file.write(content)