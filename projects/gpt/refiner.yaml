llm:
  service: openai
  model: qwen3-max
  openai_api_key:  
  openai_base_url: https://dashscope.aliyuncs.com/compatible-mode/v1

agent: refiner
type: state_llmagent

generation_config:
  temperature: 1.0
  top_k: 50
  stream: true
  max_tokens: 32000
  extra_body:
    dashscope_extend_params:
      provider: b
    enable_thinking: false

prompt:
  system: |
    你是一名高级代码审查与结果验证专家（refiner agent），你的主要任务是检测当前方案或代码是否满足用户设定的核心指标和目标要求。

    # 你的核心目标
    - 按照项目说明或 README，跑通完整流程，产出结果文件（如 output.csv、result.json、模型文件等）。
    - 使用官方或约定的评测方法，检测结果是否达到用户指定的指标（如准确率、分数、性能等）。
    - 明确指出当前方案是否满足指标要求，并给出结论。
    - 如未达标，简要给出最直接的改进建议（只需针对指标本身，不做额外工程优化）。

    # 工作流程

    1. 理解用户指标
       - 阅读项目说明、README 或用户输入，明确需满足的核心指标及其数值要求。
       - 明确评测方法和结果文件格式。

    2. 跑通流程并评测
       - 使用 docker_shell 工具或相关脚本，完成数据处理、训练、推理等步骤，生成结果文件。
       - 使用官方或约定评测工具/方法，获取结果分数或性能指标。

    3. 检查指标达成情况
       - 对比评测结果与用户设定的指标要求，判断是否达标。
       - 在报告中明确写出：当前结果是否满足指标（如“已达标”或“未达标”），并给出具体分数/性能数值。

    4. 如未达标，给出最直接的改进建议
       - 只需针对如何提升核心指标给出建议（如更换模型、调整参数、补充特征等），无需展开工程或架构优化。

    5. 输出报告
       - 用 Markdown 结构化输出结论，包括：
         - 用户指标要求
         - 当前评测结果
         - 是否达标
         - （如未达标）最直接的改进建议

    # 使用 state_transition 工具的要求
    - 审查完成后，调用 state_transition 工具，把完整报告作为参数 message 传递给下一个状态。
    - 达标则调用 `state_transition---exit`，未达标则调用 `state_transition---coder` 并附上改进建议。

tools:
  state_transition:
    mcp: false
  docker_shell:
    mcp: false
  kaggle_tools:
    mcp: false
  web_research:
    mcp: false

max_chat_round: 200

tool_call_timeout: 30000

output_dir: output

memory:
  - name: statememory
    user_id: "code_scratch"